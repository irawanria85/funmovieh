!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var r="waitForImages",s=function(e){return e.srcset&&e.sizes}(new Image);e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},e.expr.pseudos["has-src"]=function(r){return e(r).is('img[src][src!=""]')},e.expr.pseudos.uncached=function(r){return!!e(r).is(":has-src")&&!r.complete},e.fn.waitForImages=function(){var t,i,n,a=0,c=0,o=e.Deferred(),u=this,h=[],f=e.waitForImages.hasImageProperties||[],l=e.waitForImages.hasImageAttributes||[],m=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(e.isPlainObject(arguments[0])?(n=arguments[0].waitForAll,i=arguments[0].each,t=arguments[0].finished):1===arguments.length&&"boolean"===e.type(arguments[0])?n=arguments[0]:(t=arguments[0],i=arguments[1],n=arguments[2]),t=t||e.noop,i=i||e.noop,n=!!n,!e.isFunction(t)||!e.isFunction(i))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var r=e(this);n?r.find("*").addBack().each(function(){var r=e(this);r.is("img:has-src")&&!r.is("[srcset]")&&h.push({src:r.attr("src"),element:r[0]}),e.each(f,function(e,s){var t,i=r.css(s);if(!i)return!0;for(;t=m.exec(i);)h.push({src:t[2],element:r[0]})}),e.each(l,function(e,s){var t=r.attr(s);return!t||void h.push({src:r.attr("src"),srcset:r.attr("srcset"),element:r[0]})})}):r.find("img:has-src").each(function(){h.push({src:this.src,element:this})})}),a=h.length,c=0,0===a&&(t.call(u),o.resolveWith(u)),e.each(h,function(n,h){var f=new Image,l="load."+r+" error."+r;e(f).one(l,function r(s){var n=[c,a,"load"==s.type];if(c++,i.apply(h.element,n),o.notifyWith(h.element,n),e(this).off(l,r),c==a)return t.call(u[0]),o.resolveWith(u[0]),!1}),s&&h.srcset&&(f.srcset=h.srcset,f.sizes=h.sizes),f.src=h.src}),o.promise()}});